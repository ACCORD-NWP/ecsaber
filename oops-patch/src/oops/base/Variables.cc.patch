--- /home/benjaminm/code/oops-bundle/ecsaber/oops-patch/src/oops/base/Variables.cc.tmp.bak	2024-05-06 12:36:57.555692310 +0200
+++ /home/benjaminm/code/oops-bundle/ecsaber/oops-patch/src/oops/base/Variables.cc	2024-04-04 15:35:09.282252474 +0200
@@ -26,16 +26,17 @@
 
 // -----------------------------------------------------------------------------
 namespace oops {
+namespace patch {
 // -----------------------------------------------------------------------------
 
-patch::Variables::Variables()
+Variables::Variables()
   : convention_(""), vars_(0), varMetaData_() {
   Log::trace() << "Variables::Variables" << std::endl;
 }
 
 // -----------------------------------------------------------------------------
 
-patch::Variables::Variables(const eckit::Configuration & conf, const std::string & name)
+Variables::Variables(const eckit::Configuration & conf, const std::string & name)
   : convention_(""), vars_(0), channels_(0), varMetaData_() {
   Log::trace() << "Variables::Variables start " << conf << std::endl;
   std::vector<std::string> vars;
@@ -61,7 +62,7 @@
 }
 
 // -----------------------------------------------------------------------------
-patch::Variables::Variables(const std::vector<std::string> & vars, const std::string & conv)
+Variables::Variables(const std::vector<std::string> & vars, const std::string & conv)
   : convention_(conv), vars_(vars), varMetaData_() {
   Log::trace() << "Variables::Variables start " << vars << std::endl;
   Log::trace() << "Variables::Variables done" << std::endl;
@@ -69,7 +70,7 @@
 
 // -----------------------------------------------------------------------------
 
-patch::Variables::Variables(const std::vector<std::string> & vars, const std::vector<int> & channels)
+Variables::Variables(const std::vector<std::string> & vars, const std::vector<int> & channels)
   : convention_(""), vars_(0), channels_(channels), varMetaData_() {
   Log::trace() << "Variables::Variables start " << vars << " @ " << channels << std::endl;
   if (channels.empty()) {
@@ -86,7 +87,7 @@
 
 // -----------------------------------------------------------------------------
 
-patch::Variables::Variables(const eckit::Configuration & conf, const std::vector<std::string> & vars)
+Variables::Variables(const eckit::Configuration & conf, const std::vector<std::string> & vars)
   : convention_(""), vars_(vars), varMetaData_(conf)
 {
   Log::trace() << "Variables::Variables start " << vars << " @ " << conf << std::endl;
@@ -95,14 +96,14 @@
 
 // -----------------------------------------------------------------------------
 
-patch::Variables::Variables(const patch::Variables & other)
+Variables::Variables(const Variables & other)
   : convention_(other.convention_), vars_(other.vars_), channels_(other.channels_),
     varMetaData_(other.varMetaData_)
 {}
 
 // -----------------------------------------------------------------------------
 
-patch::Variables & patch::Variables::operator+=(const patch::Variables & rhs) {
+Variables & Variables::operator+=(const Variables & rhs) {
   ASSERT(convention_ == rhs.convention_);
   vars_.insert(vars_.end(), rhs.vars_.begin(), rhs.vars_.end());
   // revisit late, should we add channels this way ?
@@ -128,7 +129,7 @@
 
 // -----------------------------------------------------------------------------
 
-patch::Variables & patch::Variables::operator-=(const patch::Variables & rhs) {
+Variables & Variables::operator-=(const Variables & rhs) {
   ASSERT(convention_ == rhs.convention_);
   if (!rhs.channels().empty()) {
     throw eckit::NotImplemented(
@@ -142,14 +143,14 @@
 
 // -----------------------------------------------------------------------------
 
-patch::Variables & patch::Variables::operator-=(const std::string & var) {
+Variables & Variables::operator-=(const std::string & var) {
   vars_.erase(std::remove(vars_.begin(), vars_.end(), var), vars_.end());
   return *this;
 }
 
 // -----------------------------------------------------------------------------
 
-bool patch::Variables::operator==(const patch::Variables & rhs) const {
+bool Variables::operator==(const Variables & rhs) const {
   if ((convention_  != rhs.convention_) ||
       (channels_    != rhs.channels_)   ||
       (vars_.size() != rhs.vars_.size())) {
@@ -182,13 +183,13 @@
 
 // -----------------------------------------------------------------------------
 
-bool patch::Variables::operator!=(const patch::Variables & rhs) const {
+bool Variables::operator!=(const Variables & rhs) const {
   return (!(*this == rhs));
 }
 
 // -----------------------------------------------------------------------------
 
-bool patch::Variables::operator<=(const patch::Variables & rhs) const {
+bool Variables::operator<=(const Variables & rhs) const {
   ASSERT(convention_ == rhs.convention_);
   ASSERT(channels_.empty());
   bool is_in_rhs = true;
@@ -200,7 +201,7 @@
 
 // -----------------------------------------------------------------------------
 
-void patch::Variables::intersection(const patch::Variables & rhs) {
+void Variables::intersection(const Variables & rhs) {
   ASSERT(convention_ == rhs.convention_);
   if (this->size() * rhs.size() > 0) ASSERT(channels_.empty() == rhs.channels_.empty());
 
@@ -228,7 +229,7 @@
 
 // -----------------------------------------------------------------------------
 
-bool patch::Variables::has(const std::string & var) const {
+bool Variables::has(const std::string & var) const {
   bool found = false;
   for (size_t jj = 0; jj < vars_.size(); ++jj) {
     found = found || vars_[jj] == var;
@@ -238,7 +239,7 @@
 
 // -----------------------------------------------------------------------------
 
-size_t patch::Variables::find(const std::string & var) const {
+size_t Variables::find(const std::string & var) const {
   size_t ii = vars_.size();
   for (size_t jj = 0; jj < vars_.size(); ++jj) {
     if (vars_[jj] == var) ii = jj;
@@ -252,20 +253,20 @@
 
 // -----------------------------------------------------------------------------
 
-void patch::Variables::push_back(const std::string & vname) {
+void Variables::push_back(const std::string & vname) {
   vars_.push_back(vname);
 }
 
 // -----------------------------------------------------------------------------
 
-void patch::Variables::sort() {
+void Variables::sort() {
   std::sort(vars_.begin(), vars_.end());
   std::sort(channels_.begin(), channels_.end());
 }
 
 // -----------------------------------------------------------------------------
 
-std::vector<std::string> patch::Variables::asCanonical() const {
+std::vector<std::string> Variables::asCanonical() const {
   std::vector<std::string> vars(vars_);
   std::sort(vars.begin(), vars.end());
   return vars;
@@ -273,7 +274,7 @@
 
 // -----------------------------------------------------------------------------
 
-void patch::Variables::print(std::ostream & os) const {
+void Variables::print(std::ostream & os) const {
   os << vars_.size() << " variables: ";
   for (size_t jj = 0; jj < vars_.size(); ++jj) {
     if (jj > 0) os << ", ";
@@ -286,7 +287,7 @@
 
 // -----------------------------------------------------------------------------
 
-bool patch::Variables::hasMetaData(const std::string & varname,
+bool Variables::hasMetaData(const std::string & varname,
                             const std::string & keyname) const {
   bool has = false;
   if (!varMetaData_.empty()) {
@@ -300,11 +301,12 @@
 
 // -----------------------------------------------------------------------------
 
-int patch::Variables::getLevels(const std::string & fieldname) const {
+int Variables::getLevels(const std::string & fieldname) const {
   int levels(-1);
   getVariableSubKeyValue(fieldname, "levels",
                          varMetaData_, levels);
   return levels;
 }
 
+}  // namespace patch
 }  // namespace oops
