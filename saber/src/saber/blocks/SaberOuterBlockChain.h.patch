--- /home/benjaminm/code/oops-bundle/ecsaber/saber/src/saber/blocks/SaberOuterBlockChain.h.tmp.bak	2024-05-06 14:08:00.054271843 +0200
+++ /home/benjaminm/code/oops-bundle/ecsaber/saber/src/saber/blocks/SaberOuterBlockChain.h	2024-05-06 14:01:08.744995726 +0200
@@ -18,7 +18,7 @@
 
 #include "oops/base/FieldSet4D.h"
 #include "oops/base/FieldSets.h"
-#include "oops/base/Geometry.h"
+#include "oops/interface/Geometry.h"
 #include "oops/base/GeometryData.h"
 #include "oops/interface/ModelData.h"
 
@@ -175,6 +175,7 @@
   /// TODO(AS): Need to expand this to create different outer blocks for different
   /// times for the 4D with multiple times on one MPI task.
   std::vector<std::unique_ptr<SaberOuterBlockBase>> outerBlocks_;
+  std::unique_ptr<oops::GeometryData> geomData_;
 };
 
 // -----------------------------------------------------------------------------
@@ -186,7 +187,9 @@
                        const oops::FieldSet4D & fset4dFg,
                        oops::FieldSets & fsetEns,
                        const eckit::LocalConfiguration & covarConf,
-                       const std::vector<saber::SaberOuterBlockParametersWrapper> & params) {
+                       const std::vector<saber::SaberOuterBlockParametersWrapper> & params) :
+  geomData_(new oops::GeometryData(geom.geometry().functionSpace(), geom.geometry().fields(),
+  geom.geometry().levelsAreTopDown(), geom.geometry().getComm())) {
   oops::Log::trace() << "SaberOuterBlockChain ctor starting" << std::endl;
   oops::Log::info() << "Info     : Creating outer blocks" << std::endl;
 
@@ -198,12 +201,13 @@
   eckit::LocalConfiguration outerBlockConf{covarConf};
   outerBlockConf.set("vader", modelDataConf);
 
+
   // Loop in reverse order
   for (const SaberOuterBlockParametersWrapper & saberOuterBlockParamWrapper :
     boost::adaptors::reverse(params)) {
-    // Initialize current outer geometry data
+    // Initialize current outer variables and outer geometry data
     const oops::GeometryData & currentOuterGeometryData = outerBlocks_.size() == 0 ?
-                                       geom.generic() : outerBlocks_.back()->innerGeometryData();
+      *geomData_ : outerBlocks_.back()->innerGeometryData();
 
     // Initialize outer block
     const auto[saberOuterBlockParams,
@@ -282,7 +286,7 @@
 
     for (size_t ie = 0; ie < nens; ++ie) {
       // Read ensemble member
-      oops::FieldSet3D fset(fset4dXb[0].validTime(), geom.getComm());
+      oops::FieldSet3D fset(fset4dXb[0].validTime(), geom.geometry().getComm());
       readEnsembleMember(geom,
                          outerVars,
                          ensembleConf,
